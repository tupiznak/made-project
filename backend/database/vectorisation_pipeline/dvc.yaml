stages:
  make_corpus:
    cmd: python make_corpus.py vectorisation_config.yml
    deps:
      - vectorisation_config.yml
      - make_corpus.py
    outs:
      - corpus/corpus.txt

  train_vectorizer:
    cmd: python train.py vectorisation_config.yml
    deps:
      - corpus/corpus.txt
      - vectorisation_config.yml
      - train.py
    outs:
      - models/fasttext_vectorizer.bin

  plot_umap:
    cmd: python plot_umap.py vectorisation_config.yml
    deps:
      - models/fasttext_vectorizer.bin
    outs:
      - plots/umap_plot.html

  make_author_embeddings:
    cmd: python
#  process_data:
#    cmd: python src/data/process_features.py configs/train_config.yaml data/interim/train_heart_cleveland_upload.csv data/interim/test_heart_cleveland_upload.csv
#    deps:
#      - src/data/process_features.py
#      - configs/train_config.yaml
#      - data/interim/train_heart_cleveland_upload.csv
#      - data/interim/test_heart_cleveland_upload.csv
#    outs:
#      - data/processed/train_heart_cleveland_upload.csv
#      - data/processed/test_heart_cleveland_upload.csv
#      - models/encoder.pkl
#
#  train_model:
#    cmd: python src/models/train_model.py configs/train_config.yaml data/processed/train_heart_cleveland_upload.csv
#    deps:
#      - data/processed/train_heart_cleveland_upload.csv
#      - src/models/train_model.py
#      - configs/train_config.yaml
#      - models/encoder.pkl
#    outs:
#      - models/model.pkl
#
#  evaluate_model:
#    cmd: python src/models/eval_model.py configs/train_config.yaml data/processed/test_heart_cleveland_upload.csv
#    deps:
#      - src/models/eval_model.py
#      - configs/train_config.yaml
#      - models/model.pkl
#    outs:
#      - models/metrics.json
#
#  predict_model:
#    cmd: python src/predict_pipeline.py configs/train_config.yaml data/processed/test_heart_cleveland_upload.csv data/predictions/predictions_knn.csv
#    deps:
#      - src/predict_pipeline.py
#      - configs/train_config.yaml
#      - models/model.pkl
#    outs:
#      - data/predictions/predictions_knn.csv